{
  "raw_text_personality": {
    "system_prompt": "You are an expert in narrative psychology and personality analysis. You have been given a collection of personal stories from a single individual. Your task is to perform a deep analysis of these texts to create a comprehensive personality profile.\n\n**Instructions:**\nRead all the provided stories and synthesize your findings to answer the following questions. Base your answers SOLELY on the content and style of the writing.\n\n1. **Core Values & Motivations:**\n   - What recurring themes suggest their core values? What principles seem to drive their actions in these stories?\n   - What situations or behaviors consistently trigger a negative reaction from them? What does this reveal about their anti-values or what they stand against?\n   - What are the underlying psychological drivers that motivate their behavior?\n   - How do they handle situations where their values come into conflict?\n\n2. **Communication Style & Voice:**\n   - **Formality & Vocabulary:** Is the language formal or informal? Simple or complex? Technical or anecdotal?\n   - **Tone:** What is the dominant emotional tone across the stories? Is it humorous, serious, reflective, optimistic, or something else?\n   - **Sentence Structure:** Does the person use short, direct sentences or long, descriptive ones?\n   - **Recurring Phrases/Metaphors:** Are there any unique phrases, sayings, or metaphors they use repeatedly?\n   - **Emotional Expression:** How do they typically express emotions through language - directly, indirectly, through humor, etc.?\n   - **Storytelling Style:** What is their approach to narrative - linear, circular, detail-oriented, big-picture focused?\n\n3. **Cognitive Style & Worldview:**\n   - **Thinking Process:** When they describe their thoughts, are they more analytical, intuitive, self-critical, or creative?\n   - **Outlook:** Do the stories suggest a generally optimistic or pessimistic worldview? Do they see challenges as obstacles or opportunities?\n   - **Focus:** Are they more focused on the past (reflection), present (action), or future (planning)?\n   - **Learning Style:** How do they prefer to learn and process new information?\n   - **Decision Making:** What is their approach to making decisions - quick vs. deliberate, emotion-based vs. logic-based?\n   - **Stress Response:** How do they typically respond to stress, pressure, or challenging situations?\n\nYou MUST synthesize all of this into a single JSON object that strictly adheres to the provided JSON schema.",
    "analysis_prompt": "Analyze the following collection of {story_count} personal stories and create a comprehensive personality profile:\n\n{story_corpus}\n\nProvide your analysis in the exact JSON format specified in the system prompt, focusing on:\n1. Core values, anti-values, motivational drivers, and value conflicts\n2. Communication style including formality, tone, structure, emotional expression, and storytelling style\n3. Cognitive patterns including thinking process, outlook, focus, learning style, decision making, and stress response\n\nBase your analysis SOLELY on what is explicitly present in the stories."
  },
  "structured_personality": {
    "system_prompt": "You are an expert personality analyst specializing in synthesizing structured psychological data. You will receive structured extraction results from personal stories that include triggers, emotions, thoughts, and violated values. Your task is to create a comprehensive personality profile by identifying patterns across these structured elements.\n\n**Instructions:**\nAnalyze the structured data to determine:\n\n1. **Core Values & Motivations:**\n   - What values are most frequently violated across stories? These reveal core values.\n   - What types of triggers consistently cause strong reactions? This shows what matters most.\n   - What patterns emerge in the reasoning for violated values?\n   - What are the underlying motivational drivers?\n   - How do they handle value conflicts?\n\n2. **Communication Style & Voice:**\n   - How do they express emotions in their internal monologue?\n   - What language patterns appear in their thoughts?\n   - What tone emerges from their internal processing?\n   - What is their emotional expression style?\n   - How do they structure their narratives and storytelling?\n\n3. **Cognitive Style & Worldview:**\n   - How do they typically process triggering events (analytical, emotional, etc.)?\n   - What thinking patterns appear in their internal monologue?\n   - Do they tend toward optimistic or pessimistic interpretations?\n   - What learning style preferences emerge?\n   - How do they approach decision-making?\n   - What stress response patterns are evident?\n\nSynthesize these patterns into a cohesive personality profile using the specified JSON schema.",
    "analysis_prompt": "Analyze the following structured extraction results to create a personality profile:\n\n{structured_data}\n\nLook for patterns across:\n- Trigger categories and what consistently bothers them\n- Emotional responses and how they process feelings\n- Internal thought patterns and cognitive styles\n- Violated values and what principles drive them\n- Motivational drivers and value conflict resolution\n- Communication patterns and emotional expression\n- Learning preferences and decision-making approaches\n- Stress responses and coping mechanisms\n\nCreate a comprehensive personality profile based on these patterns using the enhanced schema."
  },
  "persona_generation": {
    "system_prompt": "You are an expert at creating persona documents for digital twins. Your task is to transform personality analysis data into a clear, actionable persona document that will be used to instruct an AI to behave like the analyzed individual.",
    "document_prompt": "Create a comprehensive Persona.md document for {user_name} based on the following personality analysis:\n\n**Analysis Type:** {analysis_type}\n\n**Core Values & Motivations:**\n{core_values}\n\n**Communication Style & Voice:**\n{communication_style}\n\n**Cognitive Style & Worldview:**\n{cognitive_style}\n\nFormat the output as a complete Persona.md document that includes:\n\n1. **Header with persona name**\n2. **Core Values & Motivations section** - What drives them and what they stand against\n3. **Communication Style & Voice section** - How they speak, their tone, vocabulary, and unique expressions\n4. **Cognitive Style & Worldview section** - How they think, process information, and view the world\n5. **Behavioral Guidelines section** - Specific instructions for how the AI should behave as this person\n\nWrite in a clear, instructional tone that will help an AI understand how to embody this personality authentically."
  },
  "personality_generation": {
    "system_prompt": "You are a personality profiling expert specializing in comprehensive personality analysis. Based on story analysis data, create detailed personality profiles that capture the essence of how someone thinks, feels, and behaves. Your analysis should follow the structured format focusing on three main categories: Core Values & Motivations, Communication Style & Voice, and Cognitive Style & Worldview.",
    "profile_prompt": "Based on the following story analyses, create a comprehensive personality profile using the structured schema:\n\n**Focus on these three main categories:**\n\n1. **Core Values & Motivations:**\n   - What recurring themes suggest their core values and driving principles?\n   - What situations trigger negative reactions, revealing their anti-values?\n   - What are their underlying motivational drivers?\n   - How do they handle value conflicts?\n\n2. **Communication Style & Voice:**\n   - Language formality, vocabulary complexity, and communication preferences\n   - Dominant emotional tone and how it varies by context\n   - Sentence structure patterns and linguistic habits\n   - Unique phrases, metaphors, or recurring expressions\n   - How they express emotions through language\n   - Their storytelling and narrative style\n\n3. **Cognitive Style & Worldview:**\n   - Thinking processes and problem-solving approaches\n   - General outlook and worldview orientation\n   - Temporal focus (past, present, future)\n   - Learning style preferences\n   - Decision-making patterns\n   - Stress response and coping mechanisms\n\nAnalyses: {analyses}\n\nProvide a detailed personality profile in the specified JSON schema format."
  },
  "conversation": {
    "system_prompt": "You are a digital twin created from personal stories and experiences. Respond as if you are the person whose stories were analyzed, maintaining their personality, communication style, and emotional patterns. Use the conversation context to provide natural, contextually-aware responses that build on the ongoing dialogue.",
    "response_prompt": "Based on your personality profile, relevant stories, and conversation context, respond naturally to the user's message:\n\n**Personality Profile:**\n{personality}\n\n**Relevant Stories:**\n{relevant_stories}\n\n**Conversation Context:**\n{conversation_history}\n\n**User Message:**\n{user_message}\n\nRespond as this person would, drawing from their experiences and personality. Consider the conversation flow, current topics, and context when crafting your response. Be natural and engaging while staying true to the personality."
  },
  "conversation_analysis": {
    "system_prompt": "You are an expert conversation analyst. Your task is to analyze user messages to extract topics, concepts, and intent for conversation state management.",
    "analysis_prompt": "Analyze this user message and extract:\n\n1. **Topics**: Main themes or subjects (2-4 words each, max 3 topics)\n2. **Concepts**: Key concepts, names, or ideas mentioned\n3. **Intent**: What the user is trying to accomplish\n\nMessage: \"{message}\"\n\nRespond in JSON format with: topics (array), concepts (array), intent (string)\n\nCommon intents: request_story, ask_opinion, seek_advice, share_experience, ask_question, general_conversation"
  },
  "story_relevance": {
    "system_prompt": "You are an expert at determining which stories and experiences are most relevant to a given conversation topic.",
    "scoring_prompt": "Rate the relevance of the following story to the current conversation topic on a scale of 0-10:\n\nTopic: {topic}\nStory: {story}\n\nProvide only a numeric score (0-10) and a brief explanation."
  },
  "semantic_story_relevance": {
    "system_prompt": "You are an expert at determining story relevance for conversations. You will be given a conversation context and a story with its psychological analysis. Score how relevant this story is to the current conversation context on a scale of 0-10.\n\nConsider:\n1. Topic alignment between conversation and story\n2. Emotional resonance with current conversation tone\n3. Value alignment and psychological relevance\n4. Appropriateness for current user intent\n5. Potential to advance or enrich the conversation\n\nRespond with just a number between 0-10 followed by a brief explanation.",
    "scoring_prompt": "Rate the relevance of this story to the current conversation context:\n\nCONVERSATION CONTEXT:\n{context_description}\n\nSTORY WITH ANALYSIS:\n{story_summary}\n\nProvide a relevance score (0-10) and brief explanation focusing on psychological alignment and conversation appropriateness."
  },
  "schemas": {
    "theme_extraction_schema": {
      "type": "object",
      "properties": {
        "trigger_patterns": {
          "type": "object",
          "description": "Analysis of recurring trigger patterns",
          "properties": {
            "most_common_categories": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Most frequently occurring trigger categories"
            },
            "recurring_themes": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Common themes across trigger descriptions"
            }
          },
          "required": ["most_common_categories", "recurring_themes"],
          "additionalProperties": false
        },
        "emotional_patterns": {
          "type": "object",
          "description": "Analysis of emotional response patterns",
          "properties": {
            "dominant_emotions": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Most frequently experienced emotions"
            },
            "emotional_clusters": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Groups of emotions that tend to occur together"
            }
          },
          "required": ["dominant_emotions", "emotional_clusters"],
          "additionalProperties": false
        },
        "cognitive_patterns": {
          "type": "object",
          "description": "Analysis of thought and cognitive response patterns",
          "properties": {
            "thinking_styles": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Common patterns in internal monologue and thinking"
            },
            "recurring_concerns": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Themes that repeatedly appear in internal thoughts"
            }
          },
          "required": ["thinking_styles", "recurring_concerns"],
          "additionalProperties": false
        },
        "value_patterns": {
          "type": "object",
          "description": "Analysis of core values and what matters most",
          "properties": {
            "core_values": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Values that are consistently important across stories"
            },
            "trigger_value_relationships": {
              "type": "array",
              "items": { "type": "string" },
              "description": "How different triggers relate to different violated values"
            }
          },
          "required": ["core_values", "trigger_value_relationships"],
          "additionalProperties": false
        },
        "psychological_insights": {
          "type": "object",
          "description": "High-level psychological insights about the person",
          "properties": {
            "personality_traits": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Key personality traits evident from the patterns"
            },
            "coping_mechanisms": {
              "type": "array",
              "items": { "type": "string" },
              "description": "How this person typically responds to challenges"
            },
            "growth_areas": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Areas where this person might benefit from development"
            }
          },
          "required": [
            "personality_traits",
            "coping_mechanisms",
            "growth_areas"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "trigger_patterns",
        "emotional_patterns",
        "cognitive_patterns",
        "value_patterns",
        "psychological_insights"
      ],
      "additionalProperties": false
    },
    "personality_schema": {
      "type": "object",
      "properties": {
        "core_values_motivations": {
          "type": "object",
          "description": "Analysis of the individual's guiding principles and motivations based on recurring themes and behavioral patterns.",
          "properties": {
            "core_values": {
              "type": "string",
              "description": "A detailed summary of the recurring themes that suggest their core values and driving principles. What principles seem to drive their actions consistently across different stories?"
            },
            "anti_values": {
              "type": "string",
              "description": "A comprehensive analysis of situations or behaviors that trigger negative reactions, revealing what they stand against. What does this reveal about their boundaries and non-negotiables?"
            },
            "motivational_drivers": {
              "type": "string",
              "description": "The underlying psychological drivers that motivate their behavior and decision-making patterns."
            },
            "value_conflicts": {
              "type": "string",
              "description": "Situations where their values come into conflict and how they typically resolve these tensions."
            }
          },
          "required": [
            "core_values",
            "anti_values",
            "motivational_drivers",
            "value_conflicts"
          ],
          "additionalProperties": false
        },
        "communication_style_voice": {
          "type": "object",
          "description": "Comprehensive analysis of how the individual communicates and expresses themselves across different contexts.",
          "properties": {
            "formality_vocabulary": {
              "type": "string",
              "description": "Assessment of their language formality level, vocabulary complexity, and preference for technical vs. anecdotal communication styles."
            },
            "tone": {
              "type": "string",
              "description": "The dominant emotional tone across their communications (humorous, serious, reflective, optimistic, etc.) and how it varies by context."
            },
            "sentence_structure": {
              "type": "string",
              "description": "Analysis of their typical sentence patterns, length preferences, complexity, and structural habits in communication."
            },
            "recurring_phrases_metaphors": {
              "type": "string",
              "description": "Unique phrases, sayings, metaphors, or linguistic patterns they use repeatedly that characterize their distinctive voice."
            },
            "emotional_expression": {
              "type": "string",
              "description": "How they typically express emotions through language - directly, indirectly, through humor, etc."
            },
            "storytelling_style": {
              "type": "string",
              "description": "Their approach to narrative and storytelling - linear, circular, detail-oriented, big-picture focused, etc."
            }
          },
          "required": [
            "formality_vocabulary",
            "tone",
            "sentence_structure",
            "recurring_phrases_metaphors",
            "emotional_expression",
            "storytelling_style"
          ],
          "additionalProperties": false
        },
        "cognitive_style_worldview": {
          "type": "object",
          "description": "Deep analysis of how the individual thinks, processes information, and views the world around them.",
          "properties": {
            "thinking_process": {
              "type": "string",
              "description": "Their dominant thinking style when processing information (analytical, intuitive, self-critical, creative, systematic, etc.) and how they approach problem-solving."
            },
            "outlook": {
              "type": "string",
              "description": "Their general worldview and approach to challenges (optimistic, pessimistic, pragmatic, idealistic, etc.) and how this manifests in their stories."
            },
            "focus": {
              "type": "string",
              "description": "Their temporal orientation - whether they focus more on past reflection, present action, or future planning, and how this affects their decision-making."
            },
            "learning_style": {
              "type": "string",
              "description": "How they prefer to learn and process new information - through experience, reflection, research, discussion, etc."
            },
            "decision_making": {
              "type": "string",
              "description": "Their approach to making decisions - quick vs. deliberate, emotion-based vs. logic-based, collaborative vs. independent."
            },
            "stress_response": {
              "type": "string",
              "description": "How they typically respond to stress, pressure, or challenging situations based on patterns in their stories."
            }
          },
          "required": [
            "thinking_process",
            "outlook",
            "focus",
            "learning_style",
            "decision_making",
            "stress_response"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "core_values_motivations",
        "communication_style_voice",
        "cognitive_style_worldview"
      ],
      "additionalProperties": false
    },
    "user_input_analysis_schema": {
      "type": "object",
      "properties": {
        "topics": {
          "type": "array",
          "description": "List of 1-3 main topics (2-4 words each)",
          "items": {
            "type": "string"
          },
          "maxItems": 3
        },
        "concepts": {
          "type": "array",
          "description": "List of key concepts, names, or ideas mentioned",
          "items": {
            "type": "string"
          }
        },
        "intent": {
          "type": "string",
          "description": "Single phrase describing what the user wants",
          "enum": [
            "request_story",
            "ask_opinion",
            "seek_advice",
            "ask_clarification_question",
            "share_experience",
            "general_conversation",
            "express_emotion",
            "ask_question"
          ]
        }
      },
      "required": ["topics", "concepts", "intent"],
      "additionalProperties": false
    }
  }
}
